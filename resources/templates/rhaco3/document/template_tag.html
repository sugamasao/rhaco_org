<rt:extends href="../index.html" />
<rt:block name="content">
	<h2>Templateの拡張タグ</h2>
	<p>
	</p>

	<div class="xml_desc">
		<a name="template_rt_template"></a>
		<h3>&lt;rt:template&gt;</h3>
		<p>
			<a href="#template_rt_template">&lt;rt:template&gt;</a>で囲まれた部分がテンプレートとして使用されます。
			ひとつも<a href="#template_rt_template">&lt;rt:template&gt;</a>がない場合は全体をテンプレートとして使用します。
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>name</td>
				<td>テンプレート名</td>
			</tr>
			</tbody>
		</table>
	</div>
	
	<div class="xml_desc">
		<a name="template_rt_extends"></a>
		<h3>&lt;rt:extends&gt;</h3>
		<p>
			継承するテンプレートを指定する
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>href</td>
				<td>継承するテンプレートの相対パス</td>
			</tr>
			</tbody>
		</table>
	</div>
	
	<div class="xml_desc">
		<a name="template_rt_block"></a>
		<h3>&lt;rt:block&gt;</h3>
		<p>
			上書き可能ブロックの定義、上書きを行う。
			同名のブロックが<a href="#template_rt_block">&lt;rt:block&gt;</a>で囲まれた部分に上書きされる
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>name</td>
				<td>ブロック名</td>
			</tr>
			</tbody>
		</table>
		<p></p>
		<pre trans="true" class="tips">
			&lt;rt:extends href="index.html" /&gt;
			&lt;rt:block name="abc"&gt;
				ABC
			&lt;/rt:block&gt;
			&lt;rt:block name="def"&gt;
				DEF
			&lt;/rt:block&gt;
		</pre>
	</div>
	
	<div class="xml_desc">
		<a name="template_rt_comment"></a>
		<h3>&lt;rt:comment&gt;</h3>
		<p>
			<a href="#template_rt_comment">&lt;rt:comment&gt;</a>で囲まれた部分が実行時に削除されるコメントブロックとなる
		</p>
		<pre trans="true" class="tips">
			abc
			&lt;rt:comment&gt;
				この部分は表示されない
			&lt;/rt:comment&gt;
			def
		</pre>
	</div>
	
	<div class="xml_desc">
		<a name="template_rt_loop"></a>
		<h3>&lt;rt:loop&gt;</h3>
		<p>
			<a href="#template_rt_loop">&lt;rt:loop&gt;</a>で囲まれた部分を繰り返し処理する。
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>param</td>
				<td>対象の変数名</td>
			</tr>
			<tr>
				<td>var</td>
				<td>paramからとりだされた現在の値を格納する変数名</td>
			</tr>
			<tr>
				<td>key</td>
				<td>paramからとりだされた現在のキーを格納する変数名</td>
			</tr>
			<tr>
				<td>counter</td>
				<td>offsetからの現在のカウント数を格納する変数名</td>
			</tr>
			<tr>
				<td>loop_counter</td>
				<td>現在のカウント数を格納する変数名</td>
			</tr>
			<tr>
				<td>total</td>
				<td>paramに含まれる要素の合計を格納する変数名</td>
			</tr>
			<tr>
				<td>offset</td>
				<td>開始値</td>
			</tr>
			<tr>
				<td>limit</td>
				<td>処理する最大数</td>
			</tr>
			<tr>
				<td>range</td>
				<td>
					処理する値の範囲 range="開始値,終了値"
					paramが指定されていた場合は無視される
				</td>
			</tr>
			<tr>
				<td>range_step</td>
				<td>
					rangeのステップ数
				</td>
			</tr>
			<tr>
				<td>evenodd</td>
				<td>偶数か奇数かを表す文字列を格納する変数名</td>
			</tr>
			<tr>
				<td>even_value</td>
				<td>偶数を表す文字列</td>
			</tr>
			<tr>
				<td>odd_value</td>
				<td>奇数を表す文字列</td>
			</tr>
			<tr>
				<td>first</td>
				<td>初回を表す文字列を格納する変数名</td>
			</tr>
			<tr>
				<td>first_value</td>
				<td>初回を表す文字列</td>
			</tr>
			<tr>
				<td>last</td>
				<td>最後を表す文字列を格納する変数名</td>
			</tr>
			<tr>
				<td>last_value</td>
				<td>最後を表す文字列</td>
			</tr>
			<tr>
				<td>shortfall</td>
				<td>処理が最大数に満たなかった場合に不足数を格納する変数名</td>
			</tr>
			<tr>
				<td>reverse</td>
				<td>paramを逆順にする(true, false)</td>
			</tr>
			</tbody>
		</table>
		<h4>要素</h4>
		<div>
			<a href="#template_rt_first">&lt;rt:first&gt;</a>
			<a href="#template_rt_middle">&lt;rt:middle&gt;</a>
			<a href="#template_rt_last">&lt;rt:last&gt;</a>
			<a href="#template_rt_fill">&lt;rt:fill&gt;</a>
			<a href="#template_rt_else">&lt;rt:else&gt;</a>
		</div>

		<p></p>
		<pre trans="true" class="tips">
			&lt;rt:loop param="object_list" var="obj"&gt;
				{$obj.fm_value()}
			&lt;/rt:loop&gt;
			
			&lt;rt:loop range="5,30" range_step="5" var="i"&gt;
				{$i}
			&lt;/rt:loop&gt;
		</pre>
	</div>

	<div class="xml_desc">
		<a name="template_rt_first"></a>
		<h3>&lt;rt:first&gt;</h3>
		<p>
			親要素の処理が最初の場合にのみ<a href="#template_rt_first">&lt;rt:first&gt;</a>で囲まれたブロックを処理する
		</p>
	</div>
	<div class="xml_desc">
		<a name="template_rt_middle"></a>
		<h3>&lt;rt:middle&gt;</h3>
		<p>
			親要素の処理が最初または最後`ではない`場合にのみ<a href="#template_rt_middle">&lt;rt:middle&gt;</a>で囲まれたブロックを処理する
		</p>
	</div>
	<div class="xml_desc">
		<a name="template_rt_last"></a>
		<h3>&lt;rt:last&gt;</h3>
		<p>
			親要素の処理が最後の場合にのみ<a href="#template_rt_last">&lt;rt:last&gt;</a>で囲まれたブロックを処理する
		</p>
	</div>	
	<div class="xml_desc">
		<a name="template_rt_fill"></a>
		<h3>&lt;rt:fill&gt;</h3>
		<p>
			親要素の条件が指定数に満たなかった場合に指定数になるまで<a href="#template_rt_fill">&lt;rt:fill&gt;</a>で囲まれたブロックを繰り返す
		</p>
	</div>
	<div class="xml_desc">
		<a name="template_rt_else"></a>
		<h3>&lt;rt:else&gt;</h3>
		<p>
			親要素の条件が偽の場合に親要素の<a href="#template_rt_else">&lt;rt:else&nbsp;/&gt;</a>の`下のブロック`を処理する
		</p>
	</div>
	
	<div class="xml_desc">
		<a name="template_rt_unit"></a>
		<h3>&lt;rt:unit&gt;</h3>
		<p>
			指定数で分割して配列にし処理する。varを<a href="#template_rt_loop">&lt;rt:loop&gt;</a>に渡す事ができる
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>param</td>
				<td>対象の変数名</td>
			</tr>
			<tr>
				<td>var</td>
				<td>paramからとりだされた値１行分を格納する変数名</td>
			</tr>
			<tr>
				<td>offset</td>
				<td>開始値を格納する変数名</td>
			</tr>
			<tr>
				<td>total</td>
				<td>トータル数を格納する変数名</td>
			</tr>
			<tr>
				<td>cols</td>
				<td>最大列数を格納する変数名</td>
			</tr>
			<tr>
				<td>rows</td>
				<td>最大行数を格納する変数名</td>
			</tr>
			<tr>
				<td>cols_total</td>
				<td>現在の行の値の数を格納する変数名</td>
			</tr>
			<tr>
				<td>rows_total</td>
				<td>結果の行数を格納する変数名</td>
			</tr>
			<tr>
				<td>counter</td>
				<td>現在の値の数を格納する変数名</td>
			</tr>
			</tbody>
		</table>
		
		<p></p>
		<pre trans="true" class="tips">
			<rt:unit param="abc" var="unit_list" cols="3">
				<rt:loop param="unit_list" var="a">{$a}</rt:loop>
				<br />
			</rt:unit>		
		</pre>
	</div>
	
	<div class="xml_desc">
		<a name="template_rt_if"></a>
		<h3>&lt;rt:if&gt;</h3>
		<p>
			条件が真の場合に<a href="#template_rt_if">&lt;rt:if&gt;</a>で囲まれたブロックを処理する。
			valueが指定されてない場合はparam値で判断する。
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>param</td>
				<td>対象の変数名</td>
			</tr>
			<tr>
				<td>value</td>
				<td>paramと比較する値</td>
			</tr>
			</tbody>
		</table>
		<h4>要素</h4>
		<div>
			<a href="#template_rt_else">&lt;rt:else&gt;</a>
		</div>
		
		<p></p>
		<pre trans="true" class="tips">
			<rt:if param="abc" value="1">
				One
			<rt:else />
				Other
			</rt:if>
		</pre>
	</div>
	
	<div class="xml_desc">
		<a name="template_form"></a>
		<h3>&lt;form&gt;</h3>
		<p>
			formの拡張
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>rt:ref</td>
				<td>formの要素にrt:refを適用する</td>
			</tr>
			<tr>
				<td>rt:aref</td>
				<td>結果（変数,タグの展開済）を処理する (true, false)</td>
			</tr>
			</tbody>
		</table>
		<h4>要素</h4>
		<div>
			<a href="#template_form_input">&lt;input&gt;</a>
			<a href="#template_form_input">&lt;textarea&gt;</a>
			<a href="#template_form_select">&lt;select&gt;</a>
		</div>
	</div>
	
	<div class="xml_desc">
		<a name="template_form_input"></a>
		<h3>&lt;input&gt;</h3>
		<h3>&lt;textarea&gt;</h3>		
		<p>
			Templateにセットされた値とname属性(またはid属性)を元にformを処理する。			
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>rt:ref</td>
				<td>変数を参照し処理する (true, false)</td>
			</tr>
			</tbody>
		</table>
	</div>
	
	<div class="xml_desc">
		<a name="template_form_select"></a>
		<h3>&lt;select&gt;</h3>
		<p>
			Templateにセットされた値と<span style="color:#f00">name</span>属性(またはid属性)を元にformを処理する。
			rt:paramから&lt;option&gt;を生成される。 rt:paramが未指定の場合はselect内要素が利用される。
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>rt:ref</td>
				<td>変数を参照し処理する (true, false)</td>
			</tr>
			
			<tr>
				<td>rt:param</td>
				<td>対象の変数名</td>
			</tr>
			<tr>
				<td>rt:var</td>
				<td>paramからとりだされた現在の値を格納する変数名</td>
			</tr>
			<tr>
				<td>rt:key</td>
				<td>paramからとりだされた現在のキーを格納する変数名</td>
			</tr>
			<tr>
				<td>rt:counter</td>
				<td>offsetからの現在のカウント数を格納する変数名</td>
			</tr>
			<tr>
				<td>rt:offset</td>
				<td>開始値</td>
			</tr>
			<tr>
				<td>rt:limit</td>
				<td>処理する最大数</td>
			</tr>
			<tr>
				<td>rt:range</td>
				<td>
					処理する値の範囲 rt:range="開始値,終了値"
					paramが指定されていた場合は無視される
				</td>
			</tr>
			<tr>
				<td>rt:range_step</td>
				<td>
					rangeのステップ数
				</td>
			</tr>
			<tr>
				<td>rt:evenodd</td>
				<td>偶数か奇数かを表す文字列を格納する変数名</td>
			</tr>
			<tr>
				<td>rt:even_value</td>
				<td>偶数を表す文字列(未指定の場合は"even")</td>
			</tr>
			<tr>
				<td>rt:odd_value</td>
				<td>奇数を表す文字列(未指定の場合は"odd")</td>
			</tr>
			<tr>
				<td>rt:reverse</td>
				<td>paramを逆順にする(true, false)</td>
			</tr>
			<tr>
				<td>rt:null</td>
				<td>空の値をもつ&lt;option&gt;を作成する、指定した文字列がラベルとなる</td>
			</tr>			
			</tbody>
		</table>
	</div>
	
	<div class="xml_desc">
		<a name="template_list"></a>
		<h3>&lt;table&gt;</h3>
		<h3>&lt;ul&gt;</h3>
		<h3>&lt;ol&gt;</h3>
		<p>
			繰り返し処理の拡張を処理する(<a href="#template_rt_loop">&lt;rt:loop&gt;</a>の拡張)
		</p>
		<table>
			<thead>
			<tr>
				<th>属性</th>
				<th>説明</th>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td>rt:ref</td>
				<td>変数を参照し処理する (true, false)</td>
			</tr>
			
			<tr>
				<td>rt:param</td>
				<td>対象の変数名</td>
			</tr>
			<tr>
				<td>rt:var</td>
				<td>paramからとりだされた現在の値を格納する変数名</td>
			</tr>
			<tr>
				<td>rt:key</td>
				<td>paramからとりだされた現在のキーを格納する変数名</td>
			</tr>
			<tr>
				<td>rt:counter</td>
				<td>offsetからの現在のカウント数を格納する変数名</td>
			</tr>
			<tr>
				<td>rt:offset</td>
				<td>開始値</td>
			</tr>
			<tr>
				<td>rt:limit</td>
				<td>処理する最大数</td>
			</tr>
			<tr>
				<td>rt:range</td>
				<td>
					処理する値の範囲 rt:range="開始値,終了値"
					paramが指定されていた場合は無視される
				</td>
			</tr>
			<tr>
				<td>rt:range_step</td>
				<td>
					rangeのステップ数
				</td>
			</tr>
			<tr>
				<td>rt:evenodd</td>
				<td>偶数か奇数かを表す文字列を格納する変数名</td>
			</tr>
			<tr>
				<td>rt:even_value</td>
				<td>偶数を表す文字列(未指定の場合は"even")</td>
			</tr>
			<tr>
				<td>rt:odd_value</td>
				<td>奇数を表す文字列(未指定の場合は"odd")</td>
			</tr>
			<tr>
				<td>rt:shortfall</td>
				<td>処理が最大数に満たなかった場合に不足数を格納する変数名</td>
			</tr>
			<tr>
				<td>rt:reverse</td>
				<td>paramを逆順にする(true, false)</td>
			</tr>
			<tr>
				<td>rt:null</td>
				<td>空の値をもつ&lt;option&gt;を作成する、指定した文字列がラベルとなる</td>
			</tr>			
			</tbody>
		</table>
		
		<p></p>
		<pre trans="true" class="tips">
			<table !!!rt:param="object_list"!!! !!!rt:var="obj"!!! !!!rt:evenodd="eo"!!!>
			<thead>
				<th>name</th>
				<th>value</th>
			</thead>
			!!!<tbody>
			<tr class="{$eo}">
				<td>{$obj.name()}</td>
				<td>{$obj.fm_value()}</td>
			</tr>
			</tbody>!!!
			</table>
		</pre>
	</div>
</rt:block>

	